var ZY=ZY||{};ZY.controllerManager=function(){var e=$("#zy_landscape_bg .zy_theme_bg_content"),a=$("#zy_people_bg .zy_theme_bg_content"),t=$("#zy_artifact_bg .zy_theme_bg_content"),i=$("#zy_community_bg .zy_theme_bg_content"),n=$("#zy_landscape").offset().top,l=$("#zy_people").offset().top,o=$("#zy_artifact").offset().top,s=$("#zy_community").offset().top,d=$(".zy_footer").offset().top;return{judgeShowOrNot:function(e,a){0==a.parents(e).length&&ZY.uiManager.hideMusicPlayer()},bindHScroll:function(e){var a=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",t=function(a){var t=0;a=window.event||a,t=a.wheelDelta<0||a.detail>0?e.scrollLeft+500:e.scrollLeft-500,TweenLite.to(e,.5,{scrollTo:{x:t}}),a.preventDefault?(a.preventDefault(),a.stopPropagation()):(a.returnValue=!1,a.cancelBubble=!1)};e.addEventListener(a,t)},setWheelScrollSpeed:function(){var e=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",a=function(e){var a=$(window).scrollTop();e=window.event||e,$(window).scrollTop(e.wheelDelta<0||e.detail>0?a+100:a-100),e.preventDefault?e.preventDefault():e.returnValue=!1};window.addEventListener(e,a)},scrollingHandler:function(){var r=window.pageYOffset,c=$(window).height();$("#zy_nav ul li a").removeClass("active"),n>=r||(l>=r?$("#zy_nav ul li:nth-child(1) a").addClass("active"):o>=r?$("#zy_nav ul li:nth-child(2) a").addClass("active"):s>=r?$("#zy_nav ul li:nth-child(3) a").addClass("active"):d>=r&&$("#zy_nav ul li:nth-child(4) a").addClass("active")),r>n-c&&n+720>=r?(ZY.config.deviceCode.iOS||e.addClass("zy_bg_fixed"),ZY.dataManager.landscapeLoaded||ZY.dataManager.swiper1||(ZY.dataManager.swiper1=new Swiper(".swiper1",{pagination:".swiper-pagination1",paginationClickable:!0,simulateTouch:!0,direction:"horizontal",slidesPerView:3,spaceBetween:20,breakpoints:{960:{slidesPerView:2,spaceBetween:20},640:{slidesPerView:1,spaceBetween:10}},onReachEnd:function(e){if(-1!=e.lastDate){var a=e.lastDate?3:6;ZY.dataManager.getCategoryPosts({limit:a,lastDate:e.lastDate?e.lastDate:"",categoryId:ZY.config.categoryIds.landscapeId,callback:function(t){var i=$("#zy_landscape_articles_tpl").html(),n=juicer(i,{posts:t});e.appendSlide(n),e.update(),e.lastDate=t.length<a?-1:t[t.length-1].post_full_date,ZY.dataManager.landscapeLoaded=!0}})}}}))):ZY.config.deviceCode.iOS||e.removeClass("zy_bg_fixed"),r>l-c&&l+720>=r?(ZY.config.deviceCode.iOS||a.addClass("zy_bg_fixed"),ZY.dataManager.peopleLoaded||ZY.dataManager.swiper2||(ZY.dataManager.swiper2=new Swiper(".swiper2",{pagination:".swiper-pagination2",paginationClickable:!0,simulateTouch:!0,direction:"horizontal",slidesPerView:4,spaceBetween:20,breakpoints:{960:{slidesPerView:3,spaceBetween:20},640:{slidesPerView:1,spaceBetween:10}},onReachEnd:function(e){if(-1!=e.lastDate){var a=e.lastDate?4:8;ZY.dataManager.getCategoryPosts({limit:a,lastDate:e.lastDate?e.lastDate:"",categoryId:ZY.config.categoryIds.peopleId,callback:function(t){var i=$("#zy_people_articles_tpl").html(),n=juicer(i,{posts:t});e.appendSlide(n),e.update(),e.lastDate=t.length<a?-1:t[t.length-1].post_full_date,ZY.dataManager.peopleLoaded=!0}})}}}))):ZY.config.deviceCode.iOS||a.removeClass("zy_bg_fixed"),r>o-c&&o+720>=r?(ZY.config.deviceCode.iOS||t.addClass("zy_bg_fixed"),ZY.dataManager.artifactLoaded||ZY.dataManager.swiper3||(ZY.dataManager.swiper3=new Swiper(".swiper3",{pagination:".swiper-pagination3",paginationClickable:!0,simulateTouch:!0,direction:"horizontal",slidesPerView:3,spaceBetween:20,breakpoints:{960:{slidesPerView:2,spaceBetween:20},640:{slidesPerView:1,spaceBetween:10}},onReachEnd:function(e){if(-1!=e.lastDate){var a=e.lastDate?3:6;ZY.dataManager.getCategoryPosts({limit:a,lastDate:e.lastDate?e.lastDate:"",categoryId:ZY.config.categoryIds.artifactId,callback:function(t){var i=$("#zy_artifact_articles_tpl").html(),n=juicer(i,{posts:t});e.appendSlide(n),e.update(),e.lastDate=t.length<a?-1:t[t.length-1].post_full_date,ZY.dataManager.artifactLoaded=!0}})}}}))):ZY.config.deviceCode.iOS||t.removeClass("zy_bg_fixed"),r>s-c&&s+720>=r?(ZY.config.deviceCode.iOS||i.addClass("zy_bg_fixed"),ZY.dataManager.communityLoaded||ZY.dataManager.swiper4||(ZY.dataManager.swiper4=new Swiper(".swiper4",{pagination:".swiper-pagination4",paginationClickable:!0,simulateTouch:!0,direction:"horizontal",slidesPerView:4,spaceBetween:20,breakpoints:{960:{slidesPerView:3,spaceBetween:20},640:{slidesPerView:1,spaceBetween:10}},onReachEnd:function(e){if(-1!=e.lastDate){var a=e.lastDate?4:8;ZY.dataManager.getCategoryPosts({limit:a,lastDate:e.lastDate?e.lastDate:"",categoryId:ZY.config.categoryIds.communityId,callback:function(t){var i=$("#zy_community_articles_tpl").html(),n=juicer(i,{posts:t});e.appendSlide(n),e.update(),e.lastDate=t.length<a?-1:t[t.length-1].post_full_date,ZY.dataManager.communityLoaded=!0}})}}}))):ZY.config.deviceCode.iOS||i.removeClass("zy_bg_fixed")}}}();