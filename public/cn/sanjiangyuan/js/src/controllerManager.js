var ZY=ZY||{};ZY.controllerManager=function(){var e=0,a=-350,t=$("#zy_landscape_bg .zy_theme_bg_content"),i=$("#zy_people_bg .zy_theme_bg_content"),n=$("#zy_artifact_bg .zy_theme_bg_content"),s=$("#zy_community_bg .zy_theme_bg_content"),o=$(".zy_featured").offset().top,l=$("#zy_landscape").offset().top,d=$("#zy_people").offset().top,c=$("#zy_artifact").offset().top,r=$("#zy_community").offset().top,p=$(".zy_footer").offset().top,g=$("#zy_featured_left"),_=$("#zy_featured_right"),f=$("#zy_landscape_left"),w=$("#zy_landscape_right"),u=$("#zy_people_left"),y=($("#zy_people_top"),$("#zy_people_right")),h=($("#zy_artifact_left"),$("#zy_artifact_bottom")),v=$("#zy_community_bottom");return{judgeShowOrNot:function(e,a){0==a.parents(e).length&&ZY.uiManager.hideMusicPlayer()},bindHScroll:function(e){var a=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",t=function(a){var t=0;a=window.event||a,t=a.wheelDelta<0||a.detail>0?e.scrollLeft+500:e.scrollLeft-500,TweenLite.to(e,.5,{scrollTo:{x:t}}),a.preventDefault?(a.preventDefault(),a.stopPropagation()):(a.returnValue=!1,a.cancelBubble=!1)};e.addEventListener(a,t)},setWheelScrollSpeed:function(){var e=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",a=function(e){var a=$(window).scrollTop();e=window.event||e,$(window).scrollTop(e.wheelDelta<0||e.detail>0?a+100:a-100),e.preventDefault?e.preventDefault():e.returnValue=!1};window.addEventListener(e,a)},scrollingHandler:function(){{var m=window.pageYOffset,z=$(window).height();$(window).width()}$("#zy_nav ul li a").removeClass("active"),l>=m||(d>=m?$("#zy_nav ul li:nth-child(1) a").addClass("active"):c>=m?$("#zy_nav ul li:nth-child(2) a").addClass("active"):r>=m?$("#zy_nav ul li:nth-child(3) a").addClass("active"):p>=m&&$("#zy_nav ul li:nth-child(4) a").addClass("active")),m>l-z&&l+720>=m?(ZY.config.deviceCode.iOS||t.addClass("zy_bg_fixed"),ZY.dataManager.landscapeLoaded||ZY.dataManager.swiper1||(ZY.dataManager.swiper1=new Swiper(".swiper1",{pagination:".swiper-pagination1",paginationClickable:!0,simulateTouch:!0,direction:"horizontal",slidesPerView:3,spaceBetween:20,breakpoints:{960:{slidesPerView:2,spaceBetween:20},640:{slidesPerView:1,spaceBetween:10}},onReachEnd:function(e){if(-1!=e.lastDate){var a=e.lastDate?3:6;ZY.dataManager.getCategoryPosts({limit:a,lastDate:e.lastDate?e.lastDate:"",categoryId:ZY.config.categoryIds.landscapeId,callback:function(t){var i=$("#zy_landscape_articles_tpl").html(),n=juicer(i,{posts:t});e.appendSlide(n),e.update(),e.lastDate=t.length<a?-1:t[t.length-1].post_full_date,ZY.dataManager.landscapeLoaded=!0}})}}}))):ZY.config.deviceCode.iOS||t.removeClass("zy_bg_fixed"),m>d-z&&d+720>=m?(ZY.config.deviceCode.iOS||i.addClass("zy_bg_fixed"),ZY.dataManager.peopleLoaded||ZY.dataManager.swiper2||(ZY.dataManager.swiper2=new Swiper(".swiper2",{pagination:".swiper-pagination2",paginationClickable:!0,simulateTouch:!0,direction:"horizontal",slidesPerView:4,spaceBetween:20,breakpoints:{960:{slidesPerView:3,spaceBetween:20},640:{slidesPerView:1,spaceBetween:10}},onReachEnd:function(e){if(-1!=e.lastDate){var a=e.lastDate?4:8;ZY.dataManager.getCategoryPosts({limit:a,lastDate:e.lastDate?e.lastDate:"",categoryId:ZY.config.categoryIds.peopleId,callback:function(t){var i=$("#zy_people_articles_tpl").html(),n=juicer(i,{posts:t});e.appendSlide(n),e.update(),e.lastDate=t.length<a?-1:t[t.length-1].post_full_date,ZY.dataManager.peopleLoaded=!0}})}}}))):ZY.config.deviceCode.iOS||i.removeClass("zy_bg_fixed"),m>c-z&&c+720>=m?(ZY.config.deviceCode.iOS||n.addClass("zy_bg_fixed"),ZY.dataManager.artifactLoaded||ZY.dataManager.swiper3||(ZY.dataManager.swiper3=new Swiper(".swiper3",{pagination:".swiper-pagination3",paginationClickable:!0,simulateTouch:!0,direction:"horizontal",slidesPerView:3,spaceBetween:20,breakpoints:{960:{slidesPerView:2,spaceBetween:20},640:{slidesPerView:1,spaceBetween:10}},onReachEnd:function(e){if(-1!=e.lastDate){var a=e.lastDate?3:6;ZY.dataManager.getCategoryPosts({limit:a,lastDate:e.lastDate?e.lastDate:"",categoryId:ZY.config.categoryIds.artifactId,callback:function(t){var i=$("#zy_artifact_articles_tpl").html(),n=juicer(i,{posts:t});e.appendSlide(n),e.update(),e.lastDate=t.length<a?-1:t[t.length-1].post_full_date,ZY.dataManager.artifactLoaded=!0}})}}}))):ZY.config.deviceCode.iOS||n.removeClass("zy_bg_fixed"),m>r-z&&r+720>=m?(ZY.config.deviceCode.iOS||s.addClass("zy_bg_fixed"),ZY.dataManager.communityLoaded||ZY.dataManager.swiper4||(ZY.dataManager.swiper4=new Swiper(".swiper4",{pagination:".swiper-pagination4",paginationClickable:!0,simulateTouch:!0,direction:"horizontal",slidesPerView:4,spaceBetween:20,breakpoints:{960:{slidesPerView:3,spaceBetween:20},640:{slidesPerView:1,spaceBetween:10}},onReachEnd:function(e){if(-1!=e.lastDate){var a=e.lastDate?4:8;ZY.dataManager.getCategoryPosts({limit:a,lastDate:e.lastDate?e.lastDate:"",categoryId:ZY.config.categoryIds.communityId,callback:function(t){var i=$("#zy_community_articles_tpl").html(),n=juicer(i,{posts:t});e.appendSlide(n),e.update(),e.lastDate=t.length<a?-1:t[t.length-1].post_full_date,ZY.dataManager.communityLoaded=!0}})}}}))):ZY.config.deviceCode.iOS||s.removeClass("zy_bg_fixed"),ZY.config.deviceCode.iOS||(m>e?(m>360&&(g.css("left","+=2"),_.css("right","+=2"),a+=2),m>l+360&&(f.css("left","+=2"),w.css("right","+=2")),m>d&&(u.css("left","+=2"),y.css("right","+=2")),m>c+400&&h.css("bottom","+=1"),m>r+800&&v.css("bottom","+=2")):(m>=o-360&&(g.css("left","-=2"),_.css("right","-=2")),d>m&&(f.css("left","-=2"),w.css("right","-=2")),d+1520>m&&(u.css("left","-=2"),y.css("right","-=2")),c+1600>m&&h.css("bottom","-=1"),p>m&&v.css("bottom","-=2"))),e=m}}}();