var ZY=ZY||{};ZY.DataManager={top_post_id:0,landscapeLoaded:!1,peopleLoaded:!1,artifactLoaded:!1,communityLoaded:!1,lastPeopleDate:"",lastLandscapeDate:"",lastCommunityDate:"",lastArtifactDate:"",zy_insert_people:function(t){var e=$("#zy_people_articles_tpl").html(),a=juicer(e,{posts:t});$("#zy_people_list").append($(a))},zy_insert_landscape:function(t){var e=$("#zy_landscape_articles_tpl").html(),a=juicer(e,{posts:t});$("#zy_landscape_list").append($(a))},zy_insert_community:function(t){var e=$("#zy_community_articles_tpl").html(),a=juicer(e,{posts:t});$("#zy_community_list").append($(a))},zy_insert_artifact:function(t){var e=$("#zy_artifact_articles_tpl").html(),a=juicer(e,{posts:t});$("#zy_artifact_list").append($(a))},zy_set_limit:function(t,e,a,n){var s=parseInt($("body").width()/e);return t.find(".zy_list_container").width(s*e),ZY.UIManager.callLoadingSpinner($(t)),n?3==a?$("body").width()>=720&&(s=parseInt(($("body").width()-720)/e)+2*s+1):s=3*s:s=2*s,s},zy_do_response:function(t,e,a,n,s){var i=e.length,o=t.find(".zy_contain_next");a&&0!=i&&e[0].post_id!=this.top_post_id&&(2==n?ZY.UIManager.updateSectionBG(e[0],$("#zy_people_theme")):3==n?ZY.UIManager.updateSectionBG(e[0],$("#zy_landscape_theme")):4==n?ZY.UIManager.updateSectionBG(e[0],$("#zy_comunity_theme")):5==n&&ZY.UIManager.updateSectionBG(e[0],$("#zy_artifact_theme"))),s>=i&&(0!=i&&(2==n?(this.lastPeopleDate=e[i-1].post_full_date,this.zy_insert_people(e)):3==n?(this.lastLandscapeDate=e[i-1].post_full_date,this.zy_insert_landscape(e)):4==n?(this.lastCommunityDate=e[i-1].post_full_date,this.zy_insert_community(e)):(this.lastArtifactDate=e[i-1].post_full_date,this.zy_insert_artifact(e))),o.removeClass("zy_disable"),3==n?a&&(s+2)/3-2>=i||o.removeClass("zy_disable"):a&&s/3>=i||o.removeClass("zy_disable"),s>i&&o.addClass("zy_no_more"))},zy_get_posts:function(t,e,a,n,s){var i=this.zy_set_limit(t,e,a,s);$(t).find(".zy_contain_next").addClass("zy_disable"),$.ajax({url:ZY.Config.ajaxurl,type:"post",data:{limit:i,lastDate:n,categoryId:a,action:"zy_get_posts"},success:function(e){if(e.success){var n=e.data;ZY.DataManager.zy_do_response(t,n,s,a,i)}else ZY.UIManager.popOutMsg(ZY.Config.errorCode.postsError);ZY.UIManager.hideLoadingSpinner($(t))},error:function(){ZY.UIManager.hideLoadingSpinner($(t)),ZY.UIManager.popOutMsg(ZY.Config.errorCode.connectionError)}})},get_posts_detail:function(t){$.ajax({url:ZY.Config.ajaxurl,type:"post",data:{post_id:t,action:"zy_get_post_detail"},success:function(t){if(t.success){var e=$("#zy_show_detail_tpl").html(),a=t.data,n=juicer(e,a);$("#zy_article_content").append(n),ZY.UIManager.hideLoadingSpinner($("#zy_article_content"))}else ZY.UIManager.popOutMsg(ZY.Config.errorCode.articleError)},error:function(){ZY.UIManager.popOutMsg(ZY.Config.errorCode.connectionError)}})},add_hover_event:function(t,e){var a=($(t).find(".zy_list_container"),$(t).find(".zy_list_container>ul"),$(t).find(".zy_contain_next")),n=$(t).find(".zy_contain_prev");t.hover(function(){n.css("opacity",1),a.css("opacity",1),parseInt(e.css("left"))>=0&&n.addClass("zy_disable")},function(){n.css("opacity",0),a.css("opacity",0)})},show_next_animate:function(t,e,a,n){var s=parseInt($("body").width()/e),i=$(t).find("a.zy_contain_next"),o=$(t).find("a.zy_contain_prev"),r=$(t).find(".zy_list_container"),_=$(t).find(".zy_list_container ul");r.width(s*e),i.hasClass("zy_no_more")?_.animate({left:parseInt(_.css("left"))-s*e},500,function(){o.removeClass("zy_disable"),3==a?parseInt(_.css("left"))<=-(_.find("li").length-s+2)*e&&i.addClass("zy_disable"):parseInt(_.css("left"))<=-(_.find("li").length-s)*e&&i.addClass("zy_disable")}):(this.zy_get_posts(t,e,a,n,!1),_.animate({left:parseInt(_.css("left"))-s*e},500,function(){o.removeClass("zy_disable")}))},show_prev_animate:function(t,e,a){var n=parseInt($("body").width()/e),s=$(t).find("a.zy_contain_next"),i=$(t).find("a.zy_contain_prev"),o=$(t).find(".zy_list_container"),r=$(t).find(".zy_list_container ul");if(o.width(n*e),parseInt(r.css("left"))+n*e>0)r.animate({left:0},500,function(){parseInt(r.css("left"))>-(r.find("li").length-n)*e&&s.removeClass("zy_disable"),i.addClass("zy_disable")});else{if(3==a&&parseInt(r.css("left"))+n*e>-720&&parseInt(r.css("left"))+n*e<0&&$("body").width()>720)return void r.animate({left:-720},500,function(){s.removeClass("zy_disable")});r.animate({left:parseInt(r.css("left"))+n*e},500,function(){s.removeClass("zy_disable"),0==parseInt(r.css("left"))&&i.addClass("zy_disable")})}}};